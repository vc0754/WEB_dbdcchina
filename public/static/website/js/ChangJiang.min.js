$(function () {
  $('.search_wrap .search').on('click', function(){
    $('.search_inner').submit();
  });
  $('.search_icon').on('click', function(){
    $('body').addClass('onSearch')
  });
  $('.search_wrap .close').on('click', function(){
    $('body').removeClass('onSearch')
  });
  $('.product-list-title span, .news-list-title span, .brand-list-title span').on('click', function(){
    $(this).toggleClass('r')
    $('.classification').slideToggle();
  });

  (function () {
    $("#menu-btn").click(function () {
      $(this).toggleClass("active");
      $("#header-nav").stop().slideToggle(300)
      $(".search_wrap").stop().slideToggle(300)
    })
  })();
  (function () {
    var f = $(".wechat-modal-mask"),
      h = f.find(".modal"),
      d = $("footer").find(".wechat"),
      c = $("body"),
      g = null;
    d.click(function () {
      clearTimeout(g);
      var l = $(this).offset().left,
        k = l + $(this).width() / 2,
        j = $(this).offset().top,
        i = j + $(this).height() / 2;
      c.addClass("no-scroll");
      f.show();
      h.css("transform-origin", (k - h.offset().left) + "px " + (i - h.offset().top) + "px");
      h.addClass("zoom-in")
    });

    function e() {
      c.removeClass("no-scroll");
      h.removeClass("zoom-in").addClass("zoom-out");
      f.addClass("fade-out");
      g = setTimeout(function () {
        f.hide().removeClass("fade-out");
        h.css("transform-origin", "0px 0px").removeClass("zoom-out")
      }, 300)
    }
    f.click(function (i) {
      if (i.target !== this) {
        return false
      }
      e()
    })
  })();
  var a = navigator.userAgent.toLowerCase().match(/Mobile/i) !== null;

  function b() {
    var action = $(window).scrollTop() > 0 ? 'addClass' : 'removeClass';
    $('header')[action]('fixed');
    var search_icon = '/static/website/images/icon/' + ($(window).scrollTop() > 0 ? 'search.png' : 'search_1.png');
    $('.search_icon').attr('src', search_icon);

    $(".ant-container").each(function () {
      var d = $(window).scrollTop(),
        c = $(window).height(),
        f = $(this).offset().top,
        e = a ? (2.8 / 3) : (2.5 / 3);
      if (f <= d + c * e) {
        // if (!$(this).addClass("animated")) {
          $(this).addClass("animated")
        // }
      } else {
        $(this).removeClass('animated')
      }
    })
  }
  b();
  $(window).scroll(function () {
    b()
  })
});